var jsc=function(e,t){"use strict";function n(e,t){if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(!n(e[s],t[s]))return!1;return!0}if("object"==typeof t){if(!e)return!t;if("or"in t){const r=t.or;for(const t of r)if(n(e,t))return!0;return!1}for(const r in t){const s=t[r];if(!n(e[r],s))return!1}return!0}return t===e}const r={type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"Identifier"},right:{type:"SequenceExpression",expressions:[{type:"AssignmentExpression",left:{type:"Identifier"},operator:"=",right:{type:"CallExpression",callee:{type:"Identifier"},arguments:{or:[[{type:"Literal"},{type:"CallExpression",callee:{type:"Identifier",name:"decodeURIComponent"},arguments:[{type:"Identifier"}],optional:!1}],[{type:"CallExpression",callee:{type:"Identifier",name:"decodeURIComponent"},arguments:[{type:"Identifier"}],optional:!1}]]},optional:!1}},{type:"CallExpression"}]},operator:"&&"}},s={or:[{type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier"},right:{type:"FunctionExpression",params:[{},{},{}]}}},{type:"FunctionDeclaration",params:[{},{},{}]}]};function i(e){if(!n(e,s))return null;const t=function(e){if("ExpressionStatement"===e.type&&"AssignmentExpression"===e.expression.type&&"FunctionExpression"===e.expression.right.type)return e.expression.right.body;if("FunctionDeclaration"===e.type)return e.body;return null}(e);if(!t)return null;const i=t.body.at(-2);if(!n(i,r))return null;if("ExpressionStatement"!==function(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=i(n)):"call"!==s&&"optionalCall"!==s||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}([i,"optionalAccess",e=>e.type])||"LogicalExpression"!==i.expression.type||"SequenceExpression"!==i.expression.right.type||"AssignmentExpression"!==i.expression.right.expressions[0].type)return null;const o=i.expression.right.expressions[0].right;return"CallExpression"!==o.type||"Identifier"!==o.callee.type?null:function(e){const t=1===e.arguments.length?[{type:"Identifier",name:"sig"}]:[e.arguments[0],{type:"Identifier",name:"sig"}];return{type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"sig"}],body:{type:"CallExpression",callee:{type:"Identifier",name:e.callee.name},arguments:t,optional:!1},async:!1,expression:!1,generator:!1}}(o)}function o(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=i(n)):"call"!==s&&"optionalCall"!==s||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}const p={type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:{type:"Identifier"},init:{type:"ArrayExpression",elements:[{type:"Identifier"}]}}]},l=[{type:"ReturnStatement",argument:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier"},computed:!0,property:{type:"Literal"},optional:!1},right:{type:"Identifier"},operator:"+"}}];function a(e){if(!n(e,p))return function(e){let t=null,r=null;if("ExpressionStatement"===e.type){const n=e.expression;"AssignmentExpression"===n.type&&"Identifier"===n.left.type&&"FunctionExpression"===n.right.type&&1===n.right.params.length&&(t=n.left.name,r=n.right.body)}else"FunctionDeclaration"===e.type&&1===e.params.length&&(s=o([e,"access",e=>e.id,"optionalAccess",e=>e.name]),i=()=>null,t=null!=s?s:i(),r=e.body);var s,i;if(!r||!t)return null;const p=r.body.at(-2);if("TryStatement"!==o([p,"optionalAccess",e=>e.type])||"CatchClause"!==o([p,"access",e=>e.handler,"optionalAccess",e=>e.type]))return null;if(n(p.handler.body.body,l))return c(t);return null}(e);if("VariableDeclaration"!==e.type)return null;const t=e.declarations[0];if("VariableDeclarator"!==t.type||!t.init||"ArrayExpression"!==t.init.type||1!==t.init.elements.length)return null;const r=t.init.elements[0];return r&&"Identifier"===r.type?c(r.name):null}function c(e){return{type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"nsig"}],body:{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Identifier",name:"nsig"}],optional:!1},async:!1,expression:!1,generator:!1}}const u=e.parse('\nglobalThis.XMLHttpRequest = { prototype: {} };\nconst window = Object.assign(Object.create(null), globalThis);\nwindow.location = new URL("https://www.youtube.com/watch?v=yt-dlp-wins");\nconst document = {};\nlet self = globalThis;\n').body;function y(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=i(n)):"call"!==s&&"optionalCall"!==s||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}const f={module:!1,next:!0};function d(n){const r=e.parse(n,f),s=function(e){const t=e.length;if(1===t){const t=e[0];if("ExpressionStatement"===y([t,"optionalAccess",e=>e.type])&&"CallExpression"===t.expression.type&&"MemberExpression"===t.expression.callee.type&&"FunctionExpression"===t.expression.callee.object.type)return t.expression.callee.object.body}else if(2===t){const t=e[1];if("ExpressionStatement"===y([t,"optionalAccess",e=>e.type])&&"CallExpression"===t.expression.type&&"FunctionExpression"===t.expression.callee.type){const e=t.expression.callee.body;return e.body.splice(0,1),e}}return null}(r.body);if(!s)throw new Error("Unexpected player structure");const o={nsig:null,sig:null},p=[];for(const e of s.body){if(!o.nsig){const t=a(e);t&&(o.nsig=t)}if(!o.sig){const t=i(e);t&&(o.sig=t)}g(e)&&p.push(e)}s.body=p;for(const[e,t]of Object.entries(o))t&&p.push(x(e,t));return r.body.splice(0,0,...u),t.generate(r)}function g(e){if("ExpressionStatement"===e.type){const t=e.expression.type;return"AssignmentExpression"===t||"Literal"===t}return!0}function x(e,t){return{type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"_result"},property:{type:"Identifier",name:e}},right:t}}}const m=new Map,E=new Map,h=new Map;function b(e,t){return`${e}:${t}`}function A(e){if(e.size>100){Array.from(e.keys()).slice(0,e.size-100).forEach(t=>e.delete(t))}}function I(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n),t>>>=0;return t.toString(36)}return function(e){let t,n;if("player"===e.type){n=I(e.player);const r=m.get(n);r?t=r:(t=d(e.player),m.set(n,t),A(m))}else t=e.preprocessed_player,n=I(t);let r=h.get(n);r||(r=function(e){const t={nsig:null,sig:null};return Function("_result",e)(t),t}(t),h.set(n,r),A(h));const s={type:"result",responses:e.requests.map(e=>{if(!function(e,...t){return t.includes(e)}(e.type,"nsig","sig"))return{type:"error",error:`Unknown request type: ${e.type}`};const t=r[e.type];if(!t)return{type:"error",error:`Failed to extract ${e.type} function`};try{const n={};for(const r of e.challenges){const s=b(e.type,r);let i=E.get(s);void 0===i&&(i=t(r),E.set(s,i),A(E)),n[r]=i}return{type:"result",data:n}}catch(e){return{type:"error",error:e instanceof Error?`${e.message}\n${e.stack}`:String(e)}}})};return"player"===e.type&&e.output_preprocessed&&(s.preprocessed_player=t),s}}(meriyah,astring);